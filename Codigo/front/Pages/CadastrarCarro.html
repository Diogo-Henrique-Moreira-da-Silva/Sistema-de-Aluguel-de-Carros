<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Cadastrar Carros</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="../Styles/CadastrarCarro.css">
</head>
<body>
  <header class="site-header">
    <h2 class="logo">logo</h2>
    <nav class="navigation">
      <a href="../Pages/Solicitacoes.html">Solicitações</a>
      <a href="../Pages/Login.html">Início</a>
    </nav>
  </header>

  <main class="wrap">
    <h1>Cadastrar Carros</h1>
    <p id="empresa-logada" class="lead" aria-live="polite"></p>

    <section id="cards" class="grid"></section>
  </main>

  <button class="fab" id="btnAdd" aria-label="Cadastrar novo carro">+</button>

  <div class="overlay" id="overlay" hidden></div>
  <dialog class="modal" id="carModal" aria-labelledby="carModalTitle">
    <form id="carForm">
      <header class="modal-header">
        <h2 id="carModalTitle">Novo Carro</h2>
        <button type="button" class="close" id="btnClose" aria-label="Fechar">×</button>
      </header>

      <div class="fields">
        <label>
          <span>Modelo</span>
          <input name="modelo" required placeholder="Ex.: Corolla Altis" autocomplete="off">
        </label>

        <label>
          <span>Placa</span>
          <input name="placa" required placeholder="Ex.: ABC-1D23" maxlength="8"
                 pattern="[A-Za-z]{3}-?[0-9][A-Za-z0-9][0-9]{2}" style="text-transform:uppercase" autocomplete="off">
        </label>

        <label>
          <span>Fabricante</span>
          <input name="fabricante" required placeholder="Ex.: Toyota" autocomplete="off">
        </label>

        <label>
          <span>Diária (R$)</span>
          <input name="diaria" required inputmode="decimal" step="0.01" placeholder="Ex.: 199,90" autocomplete="off">
        </label>

        <label>
          <span>Foto do carro (arquivo)</span>
          <input name="file" type="file" accept="image/*">
        </label>

        <label class="inline">
          <input type="checkbox" name="capa" checked>
          <span>Marcar como capa</span>
        </label>
      </div>

      <footer class="modal-actions">
        <button type="button" class="btn ghost" id="btnCancel">Cancelar</button>
        <button type="submit" class="btn">Salvar</button>
      </footer>
    </form>
  </dialog>

  <script>
    const nome = localStorage.getItem('userName');
    const role = (localStorage.getItem('userRole') || '').toLowerCase();
    const id   = localStorage.getItem('userId');
    const alvo = document.getElementById('empresa-logada');
    if (alvo && role === 'empresa' && id) {
      alvo.textContent = `Empresa logada: ${nome || '(sem nome)'} • ID ${id}`;
    }
  </script>
  <script src="../Scripts/CadastrarCarro.js" defer></script>
</body>
</html>
